<!--
FILE: c:\Users\maaz\Desktop\maazdb.website\app\templates\command\insert.html

PURPOSE:
Template page for INSERT command documentation in MaazDB.
-->
{% extends "base.html" %}

{% block head %}
<style>
.docs-layout {
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 2rem;
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
}

.docs-sidebar {
    position: sticky;
    top: 2rem;
    height: calc(100vh - 4rem);
    overflow-y: auto;
    padding: 1.5rem;
    background: var(--card-bg);
    border-radius: 12px;
    border: 1px solid var(--border-color);
}

.docs-sidebar h3 {
    color: var(--primary-color);
    margin: 1.5rem 0 0.75rem;
    font-size: 1rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.docs-sidebar h3:first-child {
    margin-top: 0;
}

.docs-sidebar a {
    display: block;
    padding: 0.5rem 1rem;
    color: var(--text-muted);
    text-decoration: none;
    border-radius: 6px;
    transition: all 0.2s ease;
}

.docs-sidebar a:hover {
    color: var(--primary-color);
    background: rgba(var(--primary-rgb), 0.1);
}

.docs-sidebar a.active {
    color: var(--primary-color);
    background: rgba(var(--primary-rgb), 0.15);
    font-weight: 500;
    border-left: 3px solid var(--primary-color);
}

.docs-content {
    max-width: 900px;
}

.docs-content h1 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: var(--heading-color);
}

.docs-content h2 {
    font-size: 1.8rem;
    margin: 3rem 0 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--border-color);
    color: var(--heading-color);
}

.docs-content h3 {
    font-size: 1.3rem;
    margin: 2rem 0 1rem;
    color: var(--heading-color);
}

.docs-content p {
    line-height: 1.7;
    margin-bottom: 1.25rem;
}

.code-label {
    display: inline-block;
    font-family: 'Courier New', monospace;
    font-size: 0.85rem;
    color: var(--primary-color);
    background: rgba(var(--primary-rgb), 0.1);
    padding: 0.25rem 0.75rem;
    border-radius: 4px 4px 0 0;
    margin-top: 1.5rem;
    border: 1px solid var(--border-color);
    border-bottom: none;
}

.docs-content pre {
    position: relative;
    background: #1a1b26;
    color: #c0caf5;
    padding: 1.5rem;
    border-radius: 0 8px 8px 8px;
    overflow-x: auto;
    margin: 0 0 2rem 0;
    font-size: 0.95rem;
    line-height: 1.5;
    border: 1px solid #24283b;
}

.docs-content code {
    font-family: 'Courier New', monospace;
    background: rgba(var(--primary-rgb), 0.1);
    padding: 0.2rem 0.4rem;
    border-radius: 3px;
    font-size: 0.9em;
    color: var(--primary-color);
}

.sql-keyword {
    color: #7dcfff;
    font-weight: bold;
}

.sql-string {
    color: #9ece6a;
}

.sql-number {
    color: #ff9e64;
}

.warning-box {
    background: rgba(255, 193, 7, 0.1);
    border-left: 4px solid #ffc107;
    padding: 1rem;
    border-radius: 6px;
    margin: 1.5rem 0;
}

.info-box {
    background: rgba(33, 150, 243, 0.1);
    border-left: 4px solid #2196f3;
    padding: 1rem;
    border-radius: 6px;
    margin: 1.5rem 0;
}

.copy-btn {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #c0caf5;
    padding: 0.4rem 0.8rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: all 0.2s ease;
}

.copy-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}

.nav-links {
    display: flex;
    gap: 1rem;
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 2px solid var(--border-color);
}

.nav-links a {
    flex: 1;
    padding: 1rem;
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    text-decoration: none;
    color: var(--primary-color);
    transition: all 0.2s ease;
}

.nav-links a:hover {
    background: rgba(var(--primary-rgb), 0.1);
    transform: translateY(-2px);
}

@media (max-width: 1024px) {
    .docs-layout {
        grid-template-columns: 1fr;
    }
    .docs-sidebar {
        position: static;
        height: auto;
        margin-bottom: 2rem;
    }
}

@media (max-width: 768px) {
    .docs-layout {
        padding: 1rem;
        gap: 1rem;
    }
    .docs-content h1 {
        font-size: 2rem;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="docs-layout">
    <aside class="docs-sidebar">
        <h3>INSERT Guide</h3>
        <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#syntax">Syntax</a></li>
            <li><a href="#basic-examples">Basic Examples</a></li>
            <li><a href="#data-types">Data Types</a></li>
            <li><a href="#serial-columns">SERIAL Columns</a></li>
            <li><a href="#foreign-keys">Foreign Keys</a></li>
            <li><a href="#pitfalls">Common Pitfalls</a></li>
            <li><a href="#comparison">DML Comparison</a></li>
        </ul>

        <h3>Related Commands</h3>
        <ul>
            <li><a href="{{ url_for('main.select') }}">SELECT</a></li>
            <li><a href="{{ url_for('main.update') }}">UPDATE</a></li>
            <li><a href="{{ url_for('main.delete') }}">DELETE</a></li>
        </ul>
    </aside>

    <main class="docs-content">
        <h1>INSERT Command</h1>
        <p><strong>Data Manipulation Language (DML)</strong> ‚Äî Add new rows of data into a table.</p>

        <section id="overview">
            <h2>Overview</h2>
            <p>The <code>INSERT</code> statement is used to add new records to a database table. You must specify the target table, the columns you wish to populate, and the corresponding values for those columns.</p>
            <div class="info-box">
                <strong>‚ÑπÔ∏è Note:</strong> The order of values in the <code>VALUES</code> clause must exactly match the order of columns specified in the column list.
            </div>
        </section>

        <section id="syntax">
            <h2>Syntax</h2>
            <span class="code-label">Basic Syntax</span>
            <pre><code>INSERT INTO &lt;table_name&gt; (column1, column2, ...) 
VALUES (value1, value2, ...);</code></pre>
        </section>

        <section id="basic-examples">
            <h2>Basic Examples</h2>

            <h3>Simple Insert</h3>
            <p>Adding a user with a name and age:</p>
            <span class="code-label">Example</span>
            <pre><code>INSERT INTO users (username, age) VALUES ('Alice', 30);</code></pre>

            <h3>Insert with All Supported Types</h3>
            <p>Inserting a product with text, double, boolean, and timestamp data:</p>
            <span class="code-label">Example</span>
            <pre><code>INSERT INTO products (name, price, is_active, created_at) 
VALUES ('Gaming Mouse', 59.99, TRUE, '2024-01-15 14:30:00');</code></pre>
        </section>

        <section id="data-types">
            <h2>Handling Data Types</h2>
            <p>MaazDB supports specific formatting for different data types during insertion.</p>

            <h3>Strings (TEXT)</h3>
            <p>Enclose strings in single (<code>'</code>) or double (<code>"</code>) quotes.</p>
            <pre><code>INSERT INTO logs (message) VALUES ('System started successfully');</code></pre>

            <h3>Numbers (INT, DOUBLE)</h3>
            <p>Enter numbers directly without quotes.</p>
            <pre><code>INSERT INTO measurements (temperature, pressure) VALUES (23.5, 1013);</code></pre>

            <h3>Booleans (BOOL)</h3>
            <p>Use <code>TRUE</code> or <code>FALSE</code> (case-insensitive).</p>
            <pre><code>INSERT INTO tasks (completed) VALUES (FALSE);</code></pre>

            <h3>Timestamps (TIMESTAMP)</h3>
            <p>Must follow the exact format <code>'YYYY-MM-DD HH:MM:SS'</code> enclosed in quotes.</p>
            <pre><code>INSERT INTO events (event_time) VALUES ('2023-12-31 23:59:59');</code></pre>

            <h3>UUIDs</h3>
            <p>Treat UUIDs as string literals.</p>
            <pre><code>INSERT INTO sessions (session_id) VALUES ('550e8400-e29b-41d4-a716-446655440000');</code></pre>
        </section>

        <section id="serial-columns">
            <h2>Handling SERIAL Columns</h2>
            <p>If a table has a primary key defined as <code>SERIAL</code> (auto-incrementing integer), you <strong>must not</strong> include it in the <code>INSERT</code> statement.</p>
            
            <div class="warning-box">
                <strong>‚ö†Ô∏è Important:</strong> Do not attempt to manually insert a value into a SERIAL column. The database handles this automatically.
            </div>

            <p><strong>Correct Usage:</strong></p>
            <pre><code>-- Table 'users' has columns: id (SERIAL), name (TEXT)
INSERT INTO users (name) VALUES ('Bob'); 
-- 'id' will be automatically generated (e.g., 1, 2, 3...)</code></pre>

            <p><strong>Incorrect Usage:</strong></p>
            <pre><code>-- This will likely cause an error or unexpected behavior
INSERT INTO users (id, name) VALUES (5, 'Bob');</code></pre>
        </section>

        <section id="foreign-keys">
            <h2>Foreign Key Constraints</h2>
            <p>When inserting into a column that is a <code>FOREIGN KEY</code>, the value must already exist in the referenced parent table.</p>

            <span class="code-label">Example Scenario</span>
            <pre><code>-- 1. Parent Table: users (id=1 exists)
-- 2. Child Table: orders (user_id references users.id)

-- ‚úÖ SUCCESS: User 1 exists
INSERT INTO orders (user_id, amount) VALUES (1, 99.99);

-- ‚ùå FAILURE: User 999 does not exist
INSERT INTO orders (user_id, amount) VALUES (999, 50.00);
-- Error: Foreign key constraint violation</code></pre>
        </section>

        <section id="pitfalls">
            <h2>Common Pitfalls</h2>

            <h3>‚ùå Column Count Mismatch</h3>
            <p>The number of columns must match the number of values.</p>
            <span class="code-label">Error</span>
            <pre><code>INSERT INTO users (name, age) VALUES ('Alice'); 
-- Error: Expected 2 values, got 1</code></pre>

            <h3>‚ùå Type Mismatch</h3>
            <p>Trying to insert text into a numeric field.</p>
            <span class="code-label">Error</span>
            <pre><code>INSERT INTO users (age) VALUES ('twenty'); 
-- Error: Cannot parse 'twenty' as INT</code></pre>

            <h3>‚ùå Invalid Timestamp Format</h3>
            <p>Timestamps must be precise.</p>
            <span class="code-label">Error</span>
            <pre><code>INSERT INTO events (time) VALUES ('2024/01/01'); 
-- Error: Invalid timestamp format. Use 'YYYY-MM-DD HH:MM:SS'</code></pre>
        </section>

        <section id="comparison">
            <h2>DML Comparison</h2>
            <table style="width: 100%; border-collapse: collapse; margin: 1.5rem 0;">
                <thead>
                    <tr style="background: rgba(var(--primary-rgb), 0.1);">
                        <th style="padding: 1rem; text-align: left; border: 1px solid var(--border-color);">Command</th>
                        <th style="padding: 1rem; text-align: left; border: 1px solid var(--border-color);">Purpose</th>
                        <th style="padding: 1rem; text-align: left; border: 1px solid var(--border-color);">Effect</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid var(--border-color);"><strong>INSERT</strong></td>
                        <td style="padding: 1rem; border: 1px solid var(--border-color);">Create</td>
                        <td style="padding: 1rem; border: 1px solid var(--border-color);">Adds new rows to the table.</td>
                    </tr>
                    <tr style="background: rgba(0,0,0,0.02);">
                        <td style="padding: 1rem; border: 1px solid var(--border-color);"><strong>UPDATE</strong></td>
                        <td style="padding: 1rem; border: 1px solid var(--border-color);">Modify</td>
                        <td style="padding: 1rem; border: 1px solid var(--border-color);">Changes values in existing rows.</td>
                    </tr>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid var(--border-color);"><strong>DELETE</strong></td>
                        <td style="padding: 1rem; border: 1px solid var(--border-color);">Remove</td>
                        <td style="padding: 1rem; border: 1px solid var(--border-color);">Removes rows from the table.</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <div class="nav-links">
            <a href="{{ url_for('main.create_table') }}">‚Üê CREATE TABLE</a>
            <a href="{{ url_for('main.docs') }}">üìñ Documentation</a>
            <a href="{{ url_for('main.select') }}">SELECT ‚Üí</a>
        </div>
    </main>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Copy to Clipboard
    const copyButtons = document.querySelectorAll('pre');
    
    copyButtons.forEach(pre => {
        const button = document.createElement('button');
        button.className = 'copy-btn';
        button.innerHTML = '<i class="far fa-copy"></i> Copy';
        pre.style.position = 'relative';
        pre.appendChild(button);
        
        button.addEventListener('click', async () => {
            const code = pre.querySelector('code').innerText;
            
            try {
                await navigator.clipboard.writeText(code);
                button.innerHTML = '<i class="fas fa-check"></i> Copied!';
                
                setTimeout(() => {
                    button.innerHTML = '<i class="far fa-copy"></i> Copy';
                }, 2000);
            } catch (err) {
                console.error('Failed to copy:', err);
            }
        });
    });

    // Syntax Highlighting
    const keywords = ['INSERT', 'INTO', 'VALUES', 'TRUE', 'FALSE', 'NULL', 'SERIAL', 'INT', 'TEXT', 'DOUBLE', 'BOOL', 'TIMESTAMP'];
    const codeBlocks = document.querySelectorAll('pre code');
    codeBlocks.forEach(block => {
        let html = block.innerHTML;
        const keywordRegex = new RegExp(`\\b(${keywords.join('|')})\\b`, 'gi');
        html = html.replace(keywordRegex, '<span class="sql-keyword">$1</span>');
        block.innerHTML = html;
    });

  

    // Scroll Spy
    const sidebarLinks = document.querySelectorAll('.docs-sidebar a');
    const sections = document.querySelectorAll('section[id]');
    
    window.addEventListener('scroll', () => {
        let current = '';
        const scrollY = window.pageYOffset + 100;
        
        sections.forEach(section => {
            if (scrollY >= section.offsetTop && scrollY < section.offsetTop + section.clientHeight) {
                current = section.getAttribute('id');
            }
        });
        
        sidebarLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === `#${current}`) {
                link.classList.add('active');
            }
        });
    });
});
</script>
{% endblock %}